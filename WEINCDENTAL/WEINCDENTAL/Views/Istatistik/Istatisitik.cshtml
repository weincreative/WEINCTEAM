
@{
    ViewBag.Title = "İstatistik";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div id="content">

    <div class="row">
        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9">
            <h1 class="page-title txt-color-blueDark">
                <!-- PAGE HEADER -->
                <i class="fa-fw fa fa-paperclip"></i>
                İstatistik

            </h1>
        </div>

    </div>

    <!-- widget grid -->
    <section id="widget-grid" class="">

        <!-- START ROW -->
        <div class="row">

            <!-- NEW COL START -->
            <article class="col-sm-12 col-md-12 col-lg-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget" id="wid-id-4" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-colorbutton="false" data-widget-custombutton="false" data-widget-sortable="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-paperclip"></i> </span>
                        <h2>İstatistik </h2>
                    </header>
                    <!-- widget div-->
                    <div>
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body ">
                            <form id="order-form" class="smart-form" novalidate="novalidate">
                                <header>
                                    Kriter Seçiminizi Yapınız.
                                </header>

                                <fieldset>
                                    <div class="row col col-8">

                                        <section class="col col-6">
                                            <label>Başlangıç Tarihini Seçiniz:</label>
                                            <label class="input">
                                                <i class="icon-append fa fa-calendar"></i>
                                                <input required type="text" name="startdate" id="startdate" placeholder="Başlangıç tarihi seçiniz">
                                            </label>
                                        </section>
                                        <section class="col col-6">
                                            <label>Btiş Tarihini Seçiniz:</label>
                                            <label class="input">
                                                <i class="icon-append fa fa-calendar"></i>
                                                <input required type="text" name="finishdate" id="finishdate" placeholder="Bitiş tarihi seçiniz">
                                            </label>
                                        </section>

                                    </div>
                                    <div class="form-group col col-4">
                                        <label>Kriter Seçiniz:</label>
                                        <select style="width: 100%" class="select2" id="searchSelect">
                                            <optgroup label="Hizmetler">
                                                <option value="1">Toplam Hizmetleri Getir</option>
                                            </optgroup>
                                            <optgroup label="Vezne">
                                                <option value="2">Ödemesi Bitmiş Kişi Listesi</option>
                                            </optgroup>

                                        </select>

                                    </div>
                                </fieldset>

                                <footer>
                                    <div class="col-md-11">
                                        <a onclick="GetSearch()" id="Loading"  data-loading-text="Loading..." class="btn btn-primary " autocomplete="off">
                                            <i class="fa fa-search">   </i> Ara
                                        </a>
                                    </div>
                                </footer>
                                <div class="spinner-border text-primary" role="status">
                                    <span class="sr-only">Loading...</span>
                                </div>
                                <div class="spinner-grow" role="status">
                                    <span class="sr-only">Loading...</span>
                                </div>
                                <header></header>

                            </form>
                            <br/>
                           
                            <div id="loadHizmet"></div>
                           

                        </div>
                        <!-- end widget content -->
                    </div>
                    <!-- end widget div -->
                </div>
                <!-- end widget -->
                <!-- Widget ID (each widget will need unique ID)-->


            </article>
            <!-- END COL -->
            <!-- NEW COL START -->

        </div>
        <!-- END ROW -->
    </section>
</div>
<!-- end widget grid -->
<style>
    span.select2-hidden-accessible {
        display: none;
    }
</style>
<script src="~/Scripts/WeincdentalScript.js"></script>
@section pagespecific {

    <script>

        $(document).ready(function () {

            ValidateControl();
            var tarih = new Date();
            var date = tarih.getDate();
            var month = tarih.getMonth();
            var nowMonth = parseInt(month) + 1;
            var year = tarih.getFullYear();
            var now = date + '.' + nowMonth + '.' + year;
            // START AND FINISH DATE
            $('#startdate').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                onSelect: function (selectedDate) {
                    $('#finishdate').datepicker('option', 'minDate', selectedDate);
                    $('#finishdate').datepicker('option', 'maxDate', now);
                }
            });

            $('#finishdate').datepicker({
                dateFormat: 'dd.mm.yy',
                prevText: '<i class="fa fa-chevron-left"></i>',
                nextText: '<i class="fa fa-chevron-right"></i>',
                maxDate: now,
                onSelect: function (selectedDate) {
                    $('#finishdate').datepicker('option', 'maxDate', now);
                    $('#startdate').datepicker('option', 'maxDate', selectedDate);
                }
            });
        });


        function GetSearch() {
            var kontrol = $("#order-form").valid();
           
            if (kontrol) {
                var baslangic = $('#startdate').val();
                var bitis = $('#finishdate').val();
                var deger = document.getElementById("searchSelect").value;
                var result = GetHizmet(baslangic, bitis, deger);
                $('#loadHizmet').html(result);
            }
        }

    </script>
}
